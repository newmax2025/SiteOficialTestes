<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Consulta CPF</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #000d1e;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(3, 255, 11, 0.3);
            text-align: center;
            width: 400px;
            position: relative;
            gap: 15px; 
        }
        h2 {
         color: white;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }
        .logo {
            max-width: 150px;
            margin-bottom: 10px;
        }
        input[type="text"] {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #1ba924;
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
        }
        
        button {
            background: #00ff22;
            color: rgb(0, 0, 0);
            padding: 12px;
            width: 100%;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: 0.3s;
        }
        #resultado {
            margin-top: 15px;
            font-size: 16px;
            font-weight: bold;
            color: #1e3c72;
        }
        .dados {
            margin-top: 15px;
            text-align: left;
            color: white;
        }
        .dados span {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <img class="logo" src="img/New Max Buscas.png" alt="Logo do Cliente">
        </div>
        <h2>Consulta CPF Comum</h2>
        <input type="text" id="cpf" placeholder="Digite o CPF" maxlength="14" oninput="formatCPF(this)">
        <button onclick="consultarCPF()">Consultar</button>
        <p id="resultado"></p>

        <div id="dados" class="dados" style="display: none;">
            <p><span>Nome:</span> <span id="nome"></span></p>
            <p><span>CPF:</span> <span id="cpf_resultado"></span></p>
            <p><span>Safra:</span> <span id="safra"></span></p>
            <p><span>Data de Nascimento:</span> <span id="nascimento"></span></p>
            <p><span>Nome da Mãe:</span> <span id="nome_mae"></span></p>
            <p><span>Sexo:</span> <span id="sexo"></span></p>
            <p><span>Email:</span> <span id="email"></span></p>
            <p><span>Óbito:</span> <span id="obito"></span></p>
            <p><span>Status Receita:</span> <span id="status_receita"></span></p>
            <p><span>CBO:</span> <span id="cbo"></span></p>
            <p><span>Faixa de Renda:</span> <span id="faixa_renda"></span></p>
            <p><span>Veículos:</span> <span id="veiculos"></span></p>
            <p><span>Telefones:</span> <span id="telefones"></span></p>
            <p><span>Celulares:</span> <span id="celulares"></span></p>
            <p><span>Empregos:</span> <span id="empregos"></span></p>
            <p><span>Endereços:</span> <span id="enderecos"></span></p>
        </div>
    </div>

    <script>
        function formatCPF(input) {
            let value = input.value.replace(/\D/g, '');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d)/, '$1.$2');
            value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
            input.value = value;
        }

        async function consultarCPF() {
            const cpf = document.getElementById('cpf').value;
            if (cpf.length < 14) {
                document.getElementById('resultado').innerText = 'CPF inválido!';
                return;
            }

            document.getElementById('resultado').innerText = 'Consultando...';

            const TOKEN = "3cece996-29c9-40f7-94ab-198f008c3b17"; // Substitua pelo seu token real
            const URL = `https://api.dbconsultas.com/api/v1/${TOKEN}/datalinkcpf/${cpf.replace(/\D/g, '')}`;

            try {
                const response = await fetch(URL);
                if (!response.ok) {
                    throw new Error('Erro ao consultar CPF.');
                }

                const data = await response.json();

                if (!data.data) {
                    throw new Error('Nenhuma informação encontrada para este CPF.');
                }

                const dados = data.data;

                // Preenche os campos com os dados da API
                document.getElementById('nome').innerText = dados.dados_basicos.nome || 'Não disponível';
                document.getElementById('cpf_resultado').innerText = formatarCPF(dados.dados_basicos.cpf) || 'Não disponível';
                document.getElementById('safra').innerText = dados.dados_basicos.safra || 'Não disponível';
                document.getElementById('nascimento').innerText = dados.dados_basicos.nascimento || 'Não disponível';
                document.getElementById('nome_mae').innerText = dados.dados_basicos.nome_mae || 'Não disponível';
                document.getElementById('sexo').innerText = dados.dados_basicos.sexo === "M" ? "Masculino" : "Feminino" || 'Não disponível';
                document.getElementById('email').innerText = dados.dados_basicos.email || 'Não disponível';
                document.getElementById('obito').innerText = dados.dados_basicos.obito?.status || 'Não disponível';
                document.getElementById('status_receita').innerText = dados.dados_basicos.status_receita || 'Não disponível';
                document.getElementById('cbo').innerText = dados.dados_basicos.cbo || 'Não disponível';
                document.getElementById('faixa_renda').innerText = dados.dados_basicos.faixa_renda || 'Não disponível';
                document.getElementById('veiculos').innerText = dados.veiculos.length > 0 ? dados.veiculos.join(", ") : 'Não disponível';
                document.getElementById('telefones').innerText = dados.telefones.length > 0 ? dados.telefones.join(", ") : 'Não disponível';
                document.getElementById('celulares').innerText = dados.celulares.length > 0 ? dados.celulares.join(", ") : 'Não disponível';

                // Exibe todos os empregos como uma lista, cada emprego em uma linha
                const empregos = dados.empregos.map(emplo => `${emplo.nome_empregador} (${emplo.setor})`).join("<br>");
                document.getElementById('empregos').innerHTML = empregos || 'Não disponível';

                // Exibe todos os endereços como uma lista, cada endereço em uma linha
                const enderecos = dados.endereco ? `${dados.endereco.tipo || ""} ${dados.endereco.logradouro || "Não disponível"}, ${dados.endereco.numero || "S/N"}, ${dados.endereco.bairro || "Não disponível"}, ${dados.endereco.cidade || "Não disponível"} - ${dados.endereco.uf || ""}, CEP: ${dados.endereco.cep || "Não disponível"}` : 'Não disponível';
                document.getElementById('enderecos').innerHTML = enderecos || 'Não disponível';

                document.getElementById('dados').style.display = 'block';
                document.getElementById('resultado').innerText = `Consulta realizada para o CPF: ${cpf}`;
            } catch (error) {
                document.getElementById('resultado').innerText = `Erro: ${error.message}`;
            }
        }

        function formatarCPF(cpf) {
            return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
        }
    </script>
</body>
</html>
